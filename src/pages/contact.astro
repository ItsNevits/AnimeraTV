---
import seoConfig from "@/config/seo";
import MainLayout from "@/layouts/MainLayout.astro";
---

<MainLayout
  title={"Contact Us - " + seoConfig.simpleTitle}
  description="Get in touch with Animera TV. Send us your questions, feedback, or technical issues. We're here to help improve your anime streaming experience."
  keywords={[...seoConfig.keywords, "contact", "support", "feedback", "help"]}
>
  <div class="min-h-screen bg-black py-25 px-4 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-4xl">
      <!-- Header -->
      <div class="mb-12 text-center">
        <h1 class="text-4xl font-bold text-white md:text-5xl">Contact Us</h1>
        <p class="mt-4 text-lg text-neutral-400">
          Have questions or feedback? We'd love to hear from you.
        </p>
      </div>

      <div class="grid gap-8 lg:grid-cols-2">
        <!-- Contact Form -->
        <div class="lg:sticky lg:top-24 lg:self-start">
          <div
            class="rounded-xl border border-neutral-800 bg-neutral-900/50 p-6 sm:p-8 backdrop-blur-sm"
          >
            <div class="mb-8">
              <h2 class="text-2xl font-bold text-white mb-2">
                Send us a Message
              </h2>
              <p class="text-sm text-neutral-400">
                Fill out the form below and we'll get back to you soon
              </p>
            </div>

            <form id="contact-form" class="flex flex-col gap-5">
              <!-- Name -->
              <div class="flex flex-col mb-3">
                <label
                  for="name"
                  class="mb-2 flex items-center gap-2 text-sm font-medium text-neutral-300"
                >
                  <svg
                    class="h-4 w-4 text-neutral-500"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                    ></path>
                  </svg>
                  Name
                </label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full rounded-lg border border-neutral-700 bg-neutral-800/50 px-4 py-3 text-white placeholder-neutral-500 transition-all focus:border-neutral-500 focus:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-600/50"
                  placeholder="John Doe"
                />
              </div>

              <!-- Email -->
              <div class="flex flex-col mb-3">
                <label
                  for="email"
                  class="mb-2 flex items-center gap-2 text-sm font-medium text-neutral-300"
                >
                  <svg
                    class="h-4 w-4 text-neutral-500"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                    ></path>
                  </svg>
                  Email
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full rounded-lg border border-neutral-700 bg-neutral-800/50 px-4 py-3 text-white placeholder-neutral-500 transition-all focus:border-neutral-500 focus:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-600/50"
                  placeholder="john@example.com"
                />
              </div>

              <!-- Subject -->
              <div class="flex flex-col mb-3">
                <label
                  for="subject"
                  class="mb-2 flex items-center gap-2 text-sm font-medium text-neutral-300"
                >
                  <svg
                    class="h-4 w-4 text-neutral-500"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"
                    ></path>
                  </svg>
                  Subject
                </label>
                <div class="relative">
                  <select
                    id="subject"
                    name="subject"
                    required
                    class="w-full appearance-none rounded-lg border border-neutral-700 bg-neutral-800/50 px-4 py-3 pr-10 text-white transition-all focus:border-neutral-500 focus:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-600/50"
                  >
                    <option value="" disabled selected>Select a subject</option>
                    <option value="general">General Inquiry</option>
                    <option value="technical">Technical Issue</option>
                    <option value="content">Content Request</option>
                    <option value="feedback">Feedback</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>

              <!-- Message -->
              <div class="flex flex-col mb-3 flex-1">
                <label
                  for="message"
                  class="mb-2 flex items-center gap-2 text-sm font-medium text-neutral-300"
                >
                  <svg
                    class="h-4 w-4 text-neutral-500"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
                    ></path>
                  </svg>
                  Message
                </label>
                <textarea
                  id="message"
                  name="message"
                  required
                  rows="6"
                  class="w-full resize-none rounded-lg border border-neutral-700 bg-neutral-800/50 px-4 py-3 text-white placeholder-neutral-500 transition-all focus:border-neutral-500 focus:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-600/50"
                  placeholder="Tell us what's on your mind..."></textarea>
                <p class="mt-2 text-xs text-neutral-500">
                  Please provide as much detail as possible
                </p>
              </div>

              <!-- Submit Button -->
              <button
                type="submit"
                class="cursor-pointer py-2 mt-2 flex items-center justify-center gap-2 rounded-lg bg-white px-6 font-semibold text-black transition-all hover:bg-neutral-100 active:scale-95"
              >
                Send Message
              </button>

              <!-- Success/Error Messages -->
              <div
                id="form-message"
                class="hidden rounded-lg p-4 text-sm text-neutral-300"
              >
              </div>
            </form>
          </div>
        </div>

        <!-- Contact Information & FAQ -->
        <div class="space-y-6">
          <!-- Important Notice -->
          <div
            class="rounded-xl border border-yellow-400/20 bg-yellow-400/10 p-6"
          >
            <div class="flex items-start gap-3">
              <svg
                class="h-6 w-6 shrink-0 text-yellow-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                ></path>
              </svg>
              <div>
                <h3 class="mb-2 font-semibold text-yellow-400">
                  Important Notice
                </h3>
                <p class="text-sm leading-relaxed text-neutral-300">
                  Animera TV is an UNOFFICIAL information aggregator. We do not
                  host, distribute, or store any anime content. For
                  content-related issues, please contact the original content
                  providers.
                </p>
              </div>
            </div>
          </div>

          <!-- FAQ -->
          <div
            class="rounded-xl border border-neutral-800 bg-neutral-900/50 p-6 backdrop-blur-sm"
          >
            <h3 class="mb-4 text-xl font-bold text-white">
              Frequently Asked Questions
            </h3>

            <div class="space-y-4">
              <!-- FAQ Item 1 -->
              <div>
                <h4 class="mb-2 font-semibold text-white">
                  How quickly will I get a response?
                </h4>
                <p class="text-sm leading-relaxed text-neutral-400">
                  We aim to respond to all inquiries within 24-48 hours during
                  business days.
                </p>
              </div>

              <!-- FAQ Item 2 -->
              <div>
                <h4 class="mb-2 font-semibold text-white">
                  Can you add specific anime to the site?
                </h4>
                <p class="text-sm leading-relaxed text-neutral-400">
                  We aggregate content from third-party sources. Content
                  availability depends on these external providers.
                </p>
              </div>

              <!-- FAQ Item 3 -->
              <div>
                <h4 class="mb-2 font-semibold text-white">
                  I found a bug. How do I report it?
                </h4>
                <p class="text-sm leading-relaxed text-neutral-400">
                  Please use the form and select "Technical Issue" as the
                  subject. Include as much detail as possible about the bug.
                </p>
              </div>

              <!-- FAQ Item 4 -->
              <div>
                <h4 class="mb-2 font-semibold text-white">
                  Do you store my personal information?
                </h4>
                <p class="text-sm leading-relaxed text-neutral-400">
                  We do not store personal information. See our{" "}
                  <a
                    href="/privacy"
                    class="text-white underline hover:text-neutral-300"
                  >
                    Privacy Policy
                  </a>{" "}
                  for details.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</MainLayout>

<script>
  import { actions } from "astro:actions";

  document.addEventListener("astro:page-load", () => {
    const form = document.getElementById("contact-form") as HTMLFormElement;
    const formMessage = document.getElementById("form-message");

    form?.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const data = {
        name: formData.get("name") as string,
        email: formData.get("email") as string,
        subject: formData.get("subject") as string,
        message: formData.get("message") as string,
      };

      try {
        const { data: result, error } = await actions.sendContactEmail(data);

        if (error) {
          throw new Error(error.message);
        }

        if (result?.success) {
          if (formMessage) {
            formMessage.classList.remove("hidden");
            formMessage.innerHTML =
              "Thank you for your message! We'll get back to you soon.";
          }

          form.reset();

          // Hide message after 5 seconds
          setTimeout(() => {
            if (formMessage) {
              formMessage.className = "hidden";
            }
          }, 5000);
          return;
        }
      } catch (error) {
        if (formMessage) {
          formMessage.innerHTML =
            "Sorry, there was an error sending your message. Please try again.";
        }
      }
    });
  });
</script>
